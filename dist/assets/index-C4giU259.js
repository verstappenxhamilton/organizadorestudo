import{r as u,a as Gt,R as Kt,b as Qt}from"./vendor-Gm9i_4Ku.js";import{C as Je,a as Ge,b as ce,P as Yt,T as ke,E as Ke,c as Zt,B as Qe,d as de,e as Xt,f as es,L as ts,H as ss,g as Ye,h as Ze,D as as,U as rs,i as ns,j as is,k as ls,l as os,m as Se,n as cs,o as ds,R as us,S as Fe,p as ms}from"./icons-CoferxF-.js";import{i as hs,g as ps,a as xs,d as Xe,c as et,b as fs,s as gs,T as bs}from"./firebase-DIWBXEhE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();var tt={exports:{}},he={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vs=u,js=Symbol.for("react.element"),ys=Symbol.for("react.fragment"),Ns=Object.prototype.hasOwnProperty,Ss=vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ws={key:!0,ref:!0,__self:!0,__source:!0};function st(s,t,a){var r,n={},l=null,c=null;a!==void 0&&(l=""+a),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)Ns.call(t,r)&&!ws.hasOwnProperty(r)&&(n[r]=t[r]);if(s&&s.defaultProps)for(r in t=s.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:js,type:s,key:l,ref:c,props:n,_owner:Ss.current}}he.Fragment=ys;he.jsx=st;he.jsxs=st;tt.exports=he;var e=tt.exports,we={},Le=Gt;we.createRoot=Le.createRoot,we.hydrateRoot=Le.hydrateRoot;const at=({onAddMultipleItems:s,showToast:t,syllabusItems:a,onUpdateItemName:r,onDeleteItem:n,onMoveItemUp:l,onMoveItemDown:c})=>{const[d,i]=u.useState(""),[o,p]=u.useState([]),[m,h]=u.useState(!1),[N,S]=u.useState(null),[v,x]=u.useState(""),f=()=>{if(!d.trim()){t("Nenhum texto para processar.","info");return}const j=d.trim(),k=[],z=j.match(/^([A-ZÁÊÇÕ\s]+):\s*/);let T=j;z&&(T=j.substring(z[0].length)),(()=>{T.split(/(?:\.\s+(?=\d+\s)|\n)/).forEach(M=>{if(M=M.trim(),!M)return;const O=M.match(/^(\d+)\s+(.+)/);if(O){const[,_,P]=O;k.push(`${_}. ${P.trim()}`);return}const U=M.match(/^(\d+\.\d+)\.?\s+(.+)/);if(U){const[,_,P]=U;k.push(`${_}. ${P.trim()}`);return}const Q=M.match(/^(\d+\.\d+\.\d+)\.?\s+(.+)/);if(Q){const[,_,P]=Q;k.push(`${_}. ${P.trim()}`);return}const X=M.match(/^(\d+(?:\.\d+)*\.?)\s+(.+)/);if(X){const[,_,P]=X,J=_.replace(/\.$/,"");k.push(`${J}. ${P.trim()}`)}})})();const b=k.filter(D=>D.trim().length>0);p(b),t(`${b.length} item(ns) processado(s). Revise e adicione.`,"info")},R=j=>{S(j.id),x(j.name)},w=j=>{if(v.trim()){const k=a.find(z=>z.id===j);r(j,k==null?void 0:k.name,v),S(null),x("")}else t("O nome do item não pode ser vazio.","error")},A=({item:j,onEditItemName:k,onDeleteItem:z,onMoveItemUp:T,onMoveItemDown:C,isFirst:b,isLast:D})=>{const M=j.name&&typeof j.name=="string"&&(j.name.startsWith(" - ")||/^\d+\.\d+/.test(j.name.trim()));return e.jsx("div",{className:`p-3.5 mb-2.5 border bg-slate-100 dark:bg-slate-700/50 border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover:shadow-md transition-shadow ${M?"ml-4 sm:ml-6":""}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`font-medium text-slate-700 dark:text-slate-200 flex-grow whitespace-pre-wrap ${M?"text-sm":"font-semibold text-base"}`,children:j.name}),e.jsxs("div",{className:"flex items-center space-x-1.5 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>T(j),disabled:b,className:"text-slate-400 hover:text-sky-400 p-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Mover para Cima",children:e.jsx(Ge,{size:16})}),e.jsx("button",{onClick:()=>C(j),disabled:D,className:"text-slate-400 hover:text-sky-400 p-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Mover para Baixo",children:e.jsx(ce,{size:16})}),e.jsx("button",{onClick:()=>k(j),title:"Editar Nome",className:"text-yellow-500 hover:text-yellow-600 p-1.5 rounded-md hover:bg-yellow-500/10 transition-colors",children:e.jsx(Yt,{size:18})}),e.jsx("button",{onClick:()=>z(j),title:"Excluir Item",className:"text-red-500 hover:text-red-600 p-1.5 rounded-md hover:bg-red-500/10 transition-colors",children:e.jsx(ke,{size:18})})]})]})})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[e.jsxs("button",{onClick:()=>h(!m),className:"flex items-center text-sm font-medium text-sky-600 dark:text-sky-400 hover:text-sky-700 dark:hover:text-sky-300 mb-3",children:[e.jsx(Je,{size:16,className:"mr-2"}),m?"Ocultar":"Mostrar"," Processador de Edital Colado"]}),m&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cole o Edital Aqui para Processamento Rápido"}),e.jsx("textarea",{value:d,onChange:j=>i(j.target.value),placeholder:"Cole o conteúdo do edital aqui. O sistema tentará identificar tópicos e subtópicos automaticamente.",className:"w-full h-32 p-3 text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-sky-500 focus:border-sky-500"}),e.jsx("button",{onClick:f,className:"mt-2 px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors text-sm font-medium",children:"Processar Edital Colado"}),o.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Itens Processados (",o.length,")"]}),e.jsx("button",{onClick:()=>{s(o),p([]),i(""),t("Itens adicionados com sucesso!","success")},className:"px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-xs font-medium",children:"Adicionar Todos"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar space-y-1",children:o.map((j,k)=>{const z=/^\d+\.\d+/.test(j.trim());return e.jsx("div",{className:`p-2 text-xs bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded ${z?"ml-4 text-slate-600 dark:text-slate-400":"font-medium"}`,children:j},k)})})]})]})]}),a&&a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Itens do Edital (",a.length,")"]}),e.jsx("div",{className:"max-h-96 overflow-y-auto custom-scrollbar",children:a.map((j,k)=>e.jsx("div",{children:N===j.id?e.jsxs("div",{className:"p-3 mb-2 border border-sky-300 dark:border-sky-600 rounded-lg bg-sky-50 dark:bg-sky-900/20",children:[e.jsx("input",{type:"text",value:v,onChange:z=>x(z.target.value),className:"w-full p-2 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onKeyPress:z=>{z.key==="Enter"&&w(j.id)},autoFocus:!0}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>w(j.id),className:"px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",children:"Salvar"}),e.jsx("button",{onClick:()=>{S(null),x("")},className:"px-3 py-1 bg-gray-500 text-white rounded text-xs hover:bg-gray-600",children:"Cancelar"})]})]}):e.jsx(A,{item:j,onEditItemName:R,onDeleteItem:n,onMoveItemUp:l,onMoveItemDown:c,isFirst:k===0,isLast:k===a.length-1})},j.id))})]})]})},Cs=({isOpen:s,onClose:t,editingProfile:a,onSubmit:r,showToast:n})=>{const[l,c]=u.useState({name:"",description:"",examDate:"",institution:""});u.useEffect(()=>{c(a?{name:a.name||"",description:a.description||"",examDate:a.examDate||"",institution:a.institution||""}:{name:"",description:"",examDate:"",institution:""})},[a]);const d=i=>{if(i.preventDefault(),!l.name.trim()){n("Nome do perfil é obrigatório","warning");return}r(l)};return s?e.jsx("div",{className:"modal-overlay",onClick:i=>{i.target===i.currentTarget&&t()},children:e.jsxs("div",{className:"modal",onClick:i=>i.stopPropagation(),children:[e.jsxs("h2",{children:[a?"Editar Perfil":"Novo Perfil de Concurso",e.jsx("button",{className:"close-btn",onClick:t,children:"×"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Nome do Concurso ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"form-input",value:l.name,onChange:i=>c(o=>({...o,name:i.target.value})),placeholder:"",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Descrição"}),e.jsx("textarea",{className:"form-textarea",value:l.description,onChange:i=>c(o=>({...o,description:i.target.value})),placeholder:"Descrição do concurso...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Data da Prova"}),e.jsx("input",{type:"date",className:"form-input",value:l.examDate,onChange:i=>c(o=>({...o,examDate:i.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Instituição"}),e.jsx("input",{type:"text",className:"form-input",value:l.institution,onChange:i=>c(o=>({...o,institution:i.target.value})),placeholder:"Ex: CESPE, FCC, VUNESP..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",onClick:t,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:!l.name.trim(),children:a?"Salvar Alterações":"Criar Concurso"})]})]})})]})}):null},Is=({isOpen:s,onClose:t,editingSubject:a,onSubmit:r,showToast:n})=>{const[l,c]=u.useState({name:"",description:"",color:"#3b82f6",targetHours:0});u.useEffect(()=>{c(a?{name:a.name||"",description:a.description||"",color:a.color||"#3b82f6",targetHours:a.targetHours||0}:{name:"",description:"",color:"#3b82f6",targetHours:0})},[a]);const d=i=>{if(i.preventDefault(),!l.name.trim()){n("Nome da matéria é obrigatório","warning");return}r(l)};return s?e.jsx("div",{className:"modal-overlay",onClick:i=>{i.target===i.currentTarget&&t()},children:e.jsxs("div",{className:"modal",onClick:i=>i.stopPropagation(),children:[e.jsxs("h2",{children:[a?"Editar Matéria":"Nova Matéria",e.jsx("button",{className:"close-btn",onClick:t,children:"×"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Nome da Matéria ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"form-input",value:l.name,onChange:i=>c(o=>({...o,name:i.target.value})),placeholder:"Matemática",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Meta de Horas (opcional)"}),e.jsx("input",{type:"number",className:"form-input",value:l.targetHours,onChange:i=>c(o=>({...o,targetHours:parseInt(i.target.value)||0})),min:"0",placeholder:"23"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",onClick:t,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:!l.name.trim(),children:a?"Salvar Alterações":"Salvar Matéria"})]})]})})]})}):null},Es=({isOpen:s,onClose:t,selectedItem:a,subjects:r,studySessions:n})=>{var d;if(!s||!a)return null;const l=((d=r.find(i=>i.id===a.subjectId))==null?void 0:d.name)||"Matéria",c=n.filter(i=>i.syllabusItemId===a.id);return e.jsx("div",{className:"modal-overlay",onClick:i=>{i.target===i.currentTarget&&t()},children:e.jsxs("div",{className:"modal",onClick:i=>i.stopPropagation(),children:[e.jsxs("h2",{children:["Detalhes do Item: ",a.name," (",l,")",e.jsx("button",{className:"close-btn",onClick:t,children:"×"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{color:"#e2e8f0",marginBottom:"12px",fontSize:"1.1rem"},children:"Histórico de Estudos:"}),c.length===0?e.jsx("div",{style:{padding:"16px",background:"rgba(71, 85, 105, 0.2)",borderRadius:"8px",color:"#94a3b8",textAlign:"center"},children:"Nenhuma sessão de estudo registrada para este item."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:c.map(i=>e.jsxs("div",{style:{padding:"12px 16px",background:"rgba(71, 85, 105, 0.2)",borderRadius:"8px",color:"#e2e8f0"},children:["Estudado em ",new Date(i.date).toLocaleDateString("pt-BR")," (",(i.duration/60).toFixed(1),"h)"]},i.id))})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{color:"#e2e8f0",marginBottom:"12px",fontSize:"1.1rem"},children:"Histórico de Acertos:"}),c.filter(i=>i.accuracy!==void 0).length===0?e.jsx("div",{style:{padding:"16px",background:"rgba(71, 85, 105, 0.2)",borderRadius:"8px",color:"#94a3b8",textAlign:"center"},children:"Nenhum registro de acertos para este item."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:c.filter(i=>i.accuracy!==void 0).map(i=>e.jsxs("div",{style:{padding:"12px 16px",background:"rgba(71, 85, 105, 0.2)",borderRadius:"8px",color:"#e2e8f0"},children:["Acerto: ",i.accuracy,"% em ",new Date(i.date).toLocaleDateString("pt-BR"),", ",new Date(i.date).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]},i.id))})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 text-right",children:e.jsx("button",{className:"btn btn-secondary",onClick:t,children:"Fechar"})})]})})},ks=({isOpen:s,onClose:t,currentSubjectForSyllabus:a,syllabusItems:r,setSyllabusItems:n,showToast:l})=>{const[c,d]=u.useState(""),i=()=>{if(!c.trim()){l("Nome do item é obrigatório","warning");return}const v={id:Date.now().toString(),subjectId:a.id,name:c.trim(),isStudied:!1,createdAt:new Date().toISOString()},x=[...r,v];n(x),localStorage.setItem("syllabusItems",JSON.stringify(x)),d(""),l("Item adicionado com sucesso!","success")},o=v=>{const x=v.map((R,w)=>({id:(Date.now()+w).toString(),subjectId:a.id,name:R.trim(),isStudied:!1,createdAt:new Date().toISOString()})),f=[...r,...x];n(f),localStorage.setItem("syllabusItems",JSON.stringify(f))},p=(v,x,f)=>{const R=r.map(w=>w.id===v?{...w,name:f}:w);n(R),localStorage.setItem("syllabusItems",JSON.stringify(R)),l("Item atualizado com sucesso!","success")},m=v=>{const x=r.filter(f=>f.id!==v.id);n(x),localStorage.setItem("syllabusItems",JSON.stringify(x)),l("Item removido com sucesso!","success")},h=v=>{const x=r.findIndex(f=>f.id===v.id);if(x>0){const f=[...r];[f[x],f[x-1]]=[f[x-1],f[x]],n(f),localStorage.setItem("syllabusItems",JSON.stringify(f))}},N=v=>{const x=r.findIndex(f=>f.id===v.id);if(x<r.length-1){const f=[...r];[f[x],f[x+1]]=[f[x+1],f[x]],n(f),localStorage.setItem("syllabusItems",JSON.stringify(f))}};if(!s||!a)return null;const S=r.filter(v=>v.subjectId===a.id);return e.jsx("div",{className:"modal-overlay",onClick:v=>{v.target===v.currentTarget&&t()},children:e.jsxs("div",{className:"modal large",onClick:v=>v.stopPropagation(),children:[e.jsxs("h2",{children:["Gerenciar Edital - ",a.name,e.jsx("button",{className:"close-btn",onClick:t,children:"×"})]}),e.jsxs("div",{className:"p-6 custom-scrollbar",style:{maxHeight:"calc(90vh - 120px)",overflowY:"auto"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Novo Item do Edital (Individual)"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",className:"form-input",value:c,onChange:v=>d(v.target.value),placeholder:"Nome do tópico/artigo",onKeyPress:v=>{v.key==="Enter"&&i()}}),e.jsx("button",{className:"btn btn-primary",onClick:i,disabled:!c.trim(),children:"Adicionar"})]})]}),e.jsx(at,{onAddMultipleItems:o,showToast:l,syllabusItems:S,onUpdateItemName:p,onDeleteItem:m,onMoveItemUp:h,onMoveItemDown:N})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 text-right",children:e.jsx("button",{className:"btn btn-secondary",onClick:t,children:"Fechar"})})]})})},Ds=({isOpen:s,onClose:t,selectedSubject:a,studySessions:r,setEditingSession:n,setIsSessionModalOpen:l,setConfirmationDialog:c})=>{if(!s||!a)return null;const d=r.filter(m=>m.subjectId===a.id).sort((m,h)=>new Date(h.date)-new Date(m.date)),i=d.reduce((m,h)=>m+(h.duration||0),0)/60,o=m=>{n(m),l(!0),t()},p=m=>{c({isOpen:!0,title:"Confirmar Exclusão",message:"Tem certeza que deseja deletar esta sessão de estudo?",onConfirm:()=>{c({isOpen:!1,title:"",message:"",onConfirm:()=>{}})}})};return e.jsx("div",{className:"modal-overlay",onClick:m=>{m.target===m.currentTarget&&t()},children:e.jsxs("div",{className:"modal large",onClick:m=>m.stopPropagation(),children:[e.jsxs("h2",{children:["Histórico de Sessões - ",a.name,e.jsx("button",{className:"close-btn",onClick:t,children:"×"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:d.length}),e.jsx("div",{className:"stat-label",children:"Total de Sessões"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsxs("div",{className:"stat-value",children:[i.toFixed(1),"h"]}),e.jsx("div",{className:"stat-label",children:"Tempo Total"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsxs("div",{className:"stat-value",children:[d.length>0?(i/d.length).toFixed(1):0,"h"]}),e.jsx("div",{className:"stat-label",children:"Média por Sessão"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{color:"#e2e8f0",marginBottom:"16px"},children:"Sessões de Estudo"}),d.length===0?e.jsx("div",{style:{padding:"40px 20px",textAlign:"center",color:"#94a3b8"},children:"Nenhuma sessão de estudo registrada para esta matéria."}):e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:d.map(m=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"rgba(30, 41, 59, 0.6)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"8px",marginBottom:"8px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#f1f5f9",fontWeight:"500",fontSize:"0.9rem"},children:new Date(m.date).toLocaleDateString("pt-BR")}),e.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500",fontSize:"0.9rem"},children:[(m.duration/60).toFixed(1),"h"]}),m.accuracy!==void 0&&e.jsxs("span",{style:{color:"#10b981",fontWeight:"500",fontSize:"0.8rem"},children:[m.accuracy,"% acerto"]})]}),m.notes&&e.jsx("div",{style:{color:"#cbd5e1",fontSize:"0.8rem",fontStyle:"italic"},children:m.notes})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>o(m),style:{padding:"4px 8px",fontSize:"0.7rem"},children:"Editar"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>p(m.id),style:{padding:"4px 8px",fontSize:"0.7rem"},children:"Deletar"})]})]},m.id))})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 text-right",children:e.jsx("button",{className:"btn btn-secondary",onClick:t,children:"Fechar"})})]})})},Ps=({isOpen:s,onClose:t,subjects:a,studySessions:r,syllabusItems:n,getSubjectStudyTime:l})=>{if(!s)return null;const c=r.reduce((o,p)=>o+(p.duration||0),0)/60;n.length;const d=n.filter(o=>o.isStudied).length,i=n.length>0?n.reduce((o,p)=>o+(p.accuracy||0),0)/n.length:0;return e.jsx("div",{className:"modal-overlay",onClick:o=>{o.target===o.currentTarget&&t()},children:e.jsxs("div",{className:"modal large",onClick:o=>o.stopPropagation(),children:[e.jsxs("h2",{children:["Relatório de Progresso",e.jsx("button",{className:"close-btn",onClick:t,children:"×"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"stats-grid",style:{marginBottom:"30px"},children:[e.jsxs("div",{className:"stat-card",children:[e.jsxs("div",{className:"stat-value",children:[c.toFixed(1),"h"]}),e.jsx("div",{className:"stat-label",children:"Total Horas Estudadas"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:d}),e.jsx("div",{className:"stat-label",children:"Itens do Edital Estudados"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsxs("div",{className:"stat-value",children:[i.toFixed(1),"%"]}),e.jsx("div",{className:"stat-label",children:"Média de Acertos"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:r.length}),e.jsx("div",{className:"stat-label",children:"Sessões de Estudo"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{color:"#e2e8f0",marginBottom:"20px",fontSize:"1.2rem"},children:"Progresso por Matéria"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:a.map(o=>{const p=l(o.id),m=r.filter(v=>v.subjectId===o.id),h=n.filter(v=>v.subjectId===o.id),N=h.filter(v=>v.isStudied),S=h.length>0?N.length/h.length*100:0;return e.jsxs("div",{style:{padding:"15px",background:"rgba(30, 41, 59, 0.6)",borderRadius:"8px",border:"1px solid rgba(148, 163, 184, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("h4",{style:{color:"#f1f5f9",margin:0},children:o.name}),e.jsxs("span",{style:{color:"#94a3b8",fontSize:"0.9rem"},children:[p.toFixed(1),"h • ",m.length," sessões"]})]}),e.jsx("div",{style:{width:"100%",height:"8px",background:"rgba(148, 163, 184, 0.2)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${S}%`,height:"100%",background:"linear-gradient(90deg, #3b82f6, #8b5cf6)",transition:"width 0.3s ease"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px",fontSize:"0.8rem",color:"#94a3b8"},children:[e.jsxs("span",{children:[N.length," de ",h.length," itens"]}),e.jsxs("span",{children:[S.toFixed(1),"%"]})]})]},o.id)})})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 text-right",children:e.jsx("button",{className:"btn btn-secondary",onClick:t,children:"Fechar"})})]})})},Rs=({isOpen:s,onClose:t,editingSession:a,initialSessionData:r,currentSubjectForSession:n,subjects:l,syllabusItems:c,onSubmit:d,showToast:i})=>{const[o,p]=u.useState({subjectId:"",date:"",duration:0,topics:"",notes:"",difficulty:"medium",satisfaction:5});u.useEffect(()=>{p(a?{subjectId:a.subjectId||"",date:a.date||"",duration:a.duration||0,topics:a.topics||"",notes:a.notes||"",difficulty:a.difficulty||"medium",satisfaction:a.satisfaction||5}:r?{subjectId:r.subjectId||"",date:new Date().toISOString().split("T")[0],duration:0,topics:"",notes:"",difficulty:"medium",satisfaction:5}:{subjectId:n||"",date:new Date().toISOString().split("T")[0],duration:0,topics:"",notes:"",difficulty:"medium",satisfaction:5})},[a,r,n]);const m=h=>{if(h.preventDefault(),!o.subjectId){i("Selecione uma matéria","warning");return}if(!o.date){i("Data é obrigatória","warning");return}if(o.duration<=0){i("Duração deve ser maior que zero","warning");return}d(o)};return s?e.jsx("div",{className:"modal-overlay",onClick:h=>{h.target===h.currentTarget&&t()},children:e.jsxs("div",{className:"modal session-modal",onClick:h=>h.stopPropagation(),children:[e.jsxs("h2",{children:[a?"Editar Sessão":"Registrar Sessão de Estudo",e.jsx("button",{className:"close-btn",onClick:t,children:"×"})]}),e.jsx("div",{className:"p-6 session-modal-content custom-scrollbar",children:e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Matéria ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"form-select",value:o.subjectId,onChange:h=>p(N=>({...N,subjectId:h.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Selecione uma matéria"}),l.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Data ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",className:"form-input",value:o.date,onChange:h=>p(N=>({...N,date:h.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Duração (horas) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.1",className:"form-input",value:o.duration/60,onChange:h=>p(N=>({...N,duration:parseFloat(h.target.value)*60||0})),min:"0.1",placeholder:"Ex: 1.5",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Item do Edital (opcional)"}),e.jsxs("select",{className:"form-select",value:o.syllabusItemId||"",onChange:h=>p(N=>({...N,syllabusItemId:h.target.value})),children:[e.jsx("option",{value:"",children:"Selecione um item"}),o.subjectId&&c.filter(h=>h.subjectId===o.subjectId).map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Percentual de Acerto (%) (opcional)"}),e.jsx("input",{type:"number",className:"form-input",value:o.accuracy||"",onChange:h=>p(N=>({...N,accuracy:parseFloat(h.target.value)||0})),min:"0",max:"100",placeholder:"0-100"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Observações"}),e.jsx("textarea",{className:"form-textarea",value:o.notes,onChange:h=>p(N=>({...N,notes:h.target.value})),placeholder:"",rows:"3"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:o.isReview||!1,onChange:h=>p(N=>({...N,isReview:h.target.checked}))}),e.jsx("span",{className:"text-sm text-gray-700",children:"Esta sessão foi de revisão?"})]})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Agendar próxima revisão em:"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:[1,3,7,15,30].map(h=>e.jsxs("button",{type:"button",onClick:()=>{const N=new Date;N.setDate(N.getDate()+h),p(S=>({...S,nextReviewDate:N.toISOString().split("T")[0],reviewDays:h}))},style:{padding:"8px 16px",background:o.reviewDays===h?"#8b5cf6":"#6b46c1",color:"white",border:"none",borderRadius:"20px",fontSize:"0.9rem",cursor:"pointer"},children:[h," dia",h>1?"s":""]},h))}),o.nextReviewDate&&e.jsxs("div",{style:{padding:"8px 12px",background:"rgba(139, 92, 246, 0.1)",borderRadius:"6px",fontSize:"0.9rem",color:"#8b5cf6"},children:["Revisão será agendada para: ",new Date(o.nextReviewDate).toLocaleDateString("pt-BR")]}),e.jsxs("label",{className:"flex items-center gap-2 mt-3",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:o.noNextReview||!1,onChange:h=>p(N=>({...N,noNextReview:h.target.checked,nextReviewDate:h.target.checked?null:N.nextReviewDate}))}),e.jsx("span",{className:"text-sm text-gray-700",children:"Não agendar revisão"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",onClick:t,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a?"Salvar Alterações":"Registrar Sessão"})]})]})})]})}):null},Os=({subjects:s,syllabusItems:t,setSyllabusItems:a,expandedSubjects:r,setExpandedSubjects:n,getSubjectStudyTime:l,setSelectedSyllabusItem:c,setIsItemDetailsModalOpen:d,studySessions:i})=>{const[o,p]=u.useState({}),[m,h]=u.useState(null),[N,S]=u.useState(""),[v,x]=u.useState(""),f=b=>b>=80?"#10b981":b>=60?"#f59e0b":b>=40?"#f97316":"#ef4444",R=b=>`rgba(239, 68, 68, ${.2+Math.min(b/100,1)*.6})`,w=b=>{const D=new Date;let M=1;return b>=90?M=7:b>=80?M=5:b>=70?M=3:b>=60?M=2:M=1,D.setDate(D.getDate()+M),D.toISOString().split("T")[0]},A=b=>{if(!i)return null;const D=i.filter(O=>O.syllabusItemId===b&&O.accuracy!==void 0&&O.accuracy!==null);if(D.length===0)return null;const M=D.reduce((O,U)=>O+U.accuracy,0);return Math.round(M/D.length)},j=b=>{const D=parseFloat(N);if(D>=0&&D<=100){const M=w(D),O=t.map(U=>U.id===b?{...U,accuracy:D,lastAccuracyUpdate:new Date().toISOString(),nextReviewDate:M,isStudied:!0}:U);a(O),localStorage.setItem("syllabusItems",JSON.stringify(O))}h(null),S(""),x("")},k=b=>{const D=parseFloat(v);if(D>=0&&D<=100){const M=t.map(O=>O.id===b?{...O,weight:D}:O);a(M),localStorage.setItem("syllabusItems",JSON.stringify(M))}h(null),S(""),x("")},z=(b,D)=>{switch(o[D]||"todos"){case"nao-estudados":return b.filter(O=>!O.isStudied);case"com-revisao":return b.filter(O=>O.isStudied&&O.accuracy>=0);case"estudados-sem-revisao":return b.filter(O=>O.isStudied&&(O.accuracy===void 0||O.accuracy<0));default:return b}},T=b=>!b||typeof b!="string"?!1:b.startsWith(" - ")||b.startsWith("- ")||/^\d+\.\d+/.test(b.trim()),C=b=>{if(!b||typeof b!="string")return 0;const D=b.trim();if(D.startsWith("- ")||b.startsWith(" - "))return 1;const M=D.match(/^(\d+\.)+/);if(M){const O=(M[0].match(/\./g)||[]).length;return O>1?O-1:0}return 0};return e.jsx("div",{className:"subjects-overview-new",children:s.map(b=>{const D=t.filter(P=>P.subjectId===b.id),M=z(D,b.id),O=D.filter(P=>P.isStudied),U=D.length>0?O.length/D.length*100:0,Q=l(b.id),X=O.length>0?O.reduce((P,J)=>P+(J.accuracy||0),0)/O.length:0,_=r[b.id];return e.jsxs("div",{className:"subject-overview-new",children:[e.jsx("div",{className:"subject-header-new",children:e.jsxs("div",{className:"subject-info",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("h3",{className:"subject-name",style:{margin:0},children:b.name}),e.jsx("button",{className:"expand-btn",onClick:()=>{const P={...r};P[b.id]=!P[b.id],n(P)},children:_?e.jsx(Ge,{size:16}):e.jsx(ce,{size:16})})]}),_&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"subject-stats-compact",style:{marginBottom:"6px",fontSize:"0.7rem",color:"#64748b",display:"flex",flexWrap:"wrap",gap:"6px",alignItems:"center"},children:[e.jsxs("span",{style:{background:"#f1f5f9",padding:"2px 6px",borderRadius:"3px",fontWeight:"500",fontSize:"0.65rem"},children:[O.length," de ",D.length," itens (",U.toFixed(0),"%)"]}),e.jsxs("span",{style:{background:"#f1f5f9",padding:"2px 6px",borderRadius:"3px",fontWeight:"500",fontSize:"0.65rem"},children:["Média: ",X.toFixed(0),"%"]}),e.jsxs("span",{style:{background:"#f1f5f9",padding:"2px 6px",borderRadius:"3px",fontWeight:"500",fontSize:"0.65rem"},children:[Q.toFixed(1),"h estudadas"]})]}),e.jsx("div",{className:"subject-controls",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"6px"},children:e.jsxs("div",{className:"filter-tabs",style:{display:"flex",gap:"3px"},children:[e.jsx("button",{className:`filter-tab ${!o[b.id]||o[b.id]==="todos"?"active":""}`,onClick:()=>p(P=>({...P,[b.id]:"todos"})),style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"3px",border:"none",background:!o[b.id]||o[b.id]==="todos"?"#3b82f6":"#e2e8f0",color:!o[b.id]||o[b.id]==="todos"?"white":"#64748b",cursor:"pointer",fontWeight:"500"},children:"Todos"}),e.jsx("button",{className:`filter-tab ${o[b.id]==="nao-estudados"?"active":""}`,onClick:()=>p(P=>({...P,[b.id]:"nao-estudados"})),style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"3px",border:"none",background:o[b.id]==="nao-estudados"?"#3b82f6":"#e2e8f0",color:o[b.id]==="nao-estudados"?"white":"#64748b",cursor:"pointer",fontWeight:"500"},children:"Não Estudados"}),e.jsx("button",{className:`filter-tab ${o[b.id]==="com-revisao"?"active":""}`,onClick:()=>p(P=>({...P,[b.id]:"com-revisao"})),style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"3px",border:"none",background:o[b.id]==="com-revisao"?"#3b82f6":"#e2e8f0",color:o[b.id]==="com-revisao"?"white":"#64748b",cursor:"pointer",fontWeight:"500"},children:"Com Revisão"}),e.jsxs("button",{className:`filter-tab ${o[b.id]==="estudados-sem-revisao"?"active":""}`,onClick:()=>p(P=>({...P,[b.id]:"estudados-sem-revisao"})),style:{fontSize:"0.65rem",padding:"2px 6px",borderRadius:"3px",border:"none",background:o[b.id]==="estudados-sem-revisao"?"#3b82f6":"#e2e8f0",color:o[b.id]==="estudados-sem-revisao"?"white":"#64748b",cursor:"pointer",fontWeight:"500"},children:["Estudados (",U.toFixed(0),"% Rev.)"]})]})})]})]})}),_&&e.jsx("div",{className:"subject-content-new",children:M.length===0?e.jsx("div",{className:"no-items",children:"Nenhum item corresponde ao filtro selecionado."}):e.jsx("div",{className:"syllabus-items-list",children:M.map(P=>{const J=C(P.name),ee=T(P.name);return e.jsxs("div",{className:"syllabus-item-row",style:{backgroundColor:P.weight?R(P.weight):void 0,marginLeft:`${J*20}px`,borderLeft:ee?"3px solid rgba(59, 130, 246, 0.3)":"none",paddingLeft:ee?"12px":"8px"},children:[e.jsxs("div",{className:"item-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{className:"item-name",style:{fontSize:ee?"0.85rem":"0.9rem",fontWeight:ee?"400":"500",color:ee?"#94a3b8":"#e2e8f0"},children:P.name}),e.jsxs("div",{className:"item-stats",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(()=>{const $=A(P.id),G=$!==null?$:P.accuracy;return G!==void 0&&e.jsxs("div",{className:"accuracy-triangle",style:{backgroundColor:f(G),color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:"bold",marginRight:"8px"},title:$!==null?"Baseado nas sessões de estudo":"Definido manualmente",children:[G,"%"]})})(),P.weight!==void 0&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"#94a3b8"},children:["Peso: ",P.weight,"%"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("button",{className:"details-btn",onClick:()=>{c(P),d(!0)},title:"Histórico de Item",children:e.jsx(Ke,{size:12})}),e.jsx("button",{className:"details-btn",onClick:()=>{var $,G;h(P.id),S((($=P.accuracy)==null?void 0:$.toString())||""),x(((G=P.weight)==null?void 0:G.toString())||"")},title:"Editar % Acerto e Peso",children:e.jsx(Zt,{size:12})})]})]}),m===P.id&&e.jsxs("div",{className:"edit-controls",style:{marginTop:"8px",padding:"8px",background:"rgba(15, 23, 42, 0.8)",borderRadius:"6px",display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"0.8rem",color:"#cbd5e1"},children:"% Acerto:"}),e.jsx("input",{type:"number",value:N,onChange:$=>S($.target.value),className:"accuracy-input",style:{width:"60px"},min:"0",max:"100",placeholder:"0-100"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"0.8rem",color:"#cbd5e1"},children:"% Peso:"}),e.jsx("input",{type:"number",value:v,onChange:$=>x($.target.value),className:"accuracy-input",style:{width:"60px"},min:"0",max:"100",placeholder:"0-100"})]}),e.jsx("button",{className:"save-btn",onClick:()=>j(P.id),style:{fontSize:"0.7rem",padding:"4px 8px"},disabled:!N,children:"Salvar %"}),e.jsx("button",{className:"save-btn",onClick:()=>k(P.id),style:{fontSize:"0.7rem",padding:"4px 8px",background:"#059669"},disabled:!v,children:"Salvar Peso"}),e.jsx("button",{className:"save-btn",onClick:()=>{h(null),S(""),x("")},style:{fontSize:"0.7rem",padding:"4px 8px",background:"#6b7280"},children:"Cancelar"})]})]},P.id)})})})]},b.id)})})},zs=({subjects:s,studySessions:t,setIsSubjectModalOpen:a,setCurrentSubjectForSession:r,setIsSessionModalOpen:n,setCurrentSubjectForSyllabus:l,setIsSyllabusModalOpen:c,setEditingSubject:d,setConfirmationDialog:i,handleDeleteSubject:o,getSubjectStudyTime:p,calculateSubjectProgress:m,setIsSessionHistoryModalOpen:h,setSelectedSubjectForHistory:N})=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"subject-overview-header",children:[e.jsxs("h2",{children:[e.jsx(Qe,{size:20}),"Matérias (Gerenciamento)"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>a(!0),children:[e.jsx(de,{size:14}),"Nova Matéria"]}),e.jsxs("button",{className:"btn btn-success",onClick:()=>{r(null),n(!0)},children:[e.jsx(Xt,{size:14}),"Registrar Sessão"]})]})]}),e.jsx("div",{className:"grid grid-2",children:s.map(S=>e.jsxs("div",{className:"subject-card",children:[e.jsx("div",{className:"subject-header",children:e.jsx("div",{className:"subject-title",children:S.name})}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontSize:"0.9rem",color:"#e2e8f0"},children:["Horas Estudadas: ",p(S.id).toFixed(1),"h"]}),e.jsxs("span",{style:{fontSize:"0.9rem",color:"#e2e8f0"},children:["Sessões: ",t.filter(v=>v.subjectId===S.id).length]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${m(S.id)}%`}})}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#94a3b8",marginTop:"4px"},children:["Progresso do Edital: ",m(S.id),"%"]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[e.jsxs("button",{className:"btn btn-success",style:{fontSize:"0.75rem",padding:"6px 10px"},onClick:()=>{r(S.id),n(!0)},children:[e.jsx(es,{size:12}),"Sessão"]}),e.jsxs("button",{className:"btn btn-info",style:{fontSize:"0.75rem",padding:"6px 10px"},onClick:()=>{l(S),c(!0)},children:[e.jsx(ts,{size:12}),"Edital"]}),e.jsxs("button",{className:"btn btn-secondary",style:{fontSize:"0.75rem",padding:"6px 10px"},onClick:()=>{N&&N(S),h&&h(!0)},children:[e.jsx(ss,{size:12}),"Histórico"]}),e.jsxs("button",{className:"btn btn-warning",style:{fontSize:"0.75rem",padding:"6px 10px"},onClick:()=>{d(S),a(!0)},children:[e.jsx(Ye,{size:12}),"Editar"]}),e.jsxs("button",{className:"btn btn-danger",style:{fontSize:"0.75rem",padding:"6px 10px"},onClick:()=>{i({isOpen:!0,title:"Confirmar Exclusão",message:`Tem certeza que deseja deletar a matéria "${S.name}"? Todos os dados relacionados serão perdidos.`,onConfirm:()=>{o(S.id),i({isOpen:!1,title:"",message:"",onConfirm:()=>{}})}})},children:[e.jsx(ke,{size:12}),"Deletar"]})]})]},S.id))})]}),Ms=({setIsProgressReportModalOpen:s,handleExportData:t,handleImportData:a,studyProfiles:r,activeProfileId:n,setActiveProfileId:l,onOpenProfileModal:c})=>e.jsxs("div",{className:"app-header-unified",children:[e.jsxs("div",{className:"header-main-section",children:[e.jsxs("div",{className:"header-brand",children:[e.jsx("div",{className:"brand-icon",children:e.jsx(Qe,{size:24,color:"white"})}),e.jsxs("div",{className:"brand-text",children:[e.jsx("h1",{className:"brand-title",children:"📚 Organizador de Estudos"}),e.jsx("p",{className:"brand-subtitle",children:"Seu painel para conquistar os concursos!"})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{onClick:()=>s(!0),className:"action-btn primary",title:"Relatório (Ctrl+R)",children:[e.jsx(Ze,{size:16}),e.jsx("span",{children:"Relatório"})]}),e.jsxs("button",{onClick:t,className:"action-btn secondary",title:"Exportar (Ctrl+E)",children:[e.jsx(as,{size:16}),e.jsx("span",{children:"Exportar"})]}),e.jsxs("label",{className:"action-btn secondary",style:{cursor:"pointer"},title:"Importar dados",children:[e.jsx(rs,{size:16}),e.jsx("span",{children:"Importar"}),e.jsx("input",{type:"file",accept:".json",onChange:d=>{const i=d.target.files[0];i&&a(i)},style:{display:"none"}})]})]})]}),e.jsxs("div",{className:"header-profile-section",children:[e.jsxs("div",{className:"profile-controls",children:[e.jsxs("div",{className:"profile-selector",children:[e.jsx(ns,{size:16,className:"profile-icon"}),e.jsx("span",{className:"profile-label",children:"Concurso:"}),r&&r.length>0?e.jsx("select",{value:n||"",onChange:d=>l(d.target.value),className:"profile-select",children:r.map(d=>e.jsx("option",{value:d.id,children:d.name},d.id))}):e.jsx("span",{className:"no-profile",children:"Nenhum concurso criado"})]}),e.jsxs("div",{className:"profile-actions",children:[e.jsxs("button",{onClick:c,className:"profile-btn edit",title:"Gerenciar Concursos",children:[e.jsx(Ye,{size:14}),e.jsx("span",{children:"Editar"})]}),e.jsxs("button",{onClick:c,className:"profile-btn create",title:"Novo Concurso (Ctrl+N)",children:[e.jsx(is,{size:14}),e.jsx("span",{children:"Novo"})]})]})]}),e.jsx("div",{className:"connection-status",children:e.jsxs("div",{className:"status-indicator",children:[e.jsx("div",{className:"status-dot"}),e.jsx("span",{children:"Firebase Conectado"})]})})]})]}),As=({studySessions:s,syllabusItems:t,onDateClick:a})=>{const[r,n]=u.useState(new Date),l=new Date,c=r.getFullYear(),d=r.getMonth(),i=new Date(c,d,1),p=new Date(c,d+1,0).getDate(),m=i.getDay(),h=()=>{n(new Date(c,d-1,1))},N=()=>{n(new Date(c,d+1,1))},S=w=>{const A=new Date(c,d,w).toISOString().split("T")[0],j=s.filter(z=>z.date===A),k=t.filter(z=>z.nextReviewDate===A);return{hasSessions:j.length>0,hasReviews:k.length>0,sessionsCount:j.length,reviewsCount:k.length,totalHours:j.reduce((z,T)=>z+(T.duration||0),0)/60}},v=w=>l.getDate()===w&&l.getMonth()===d&&l.getFullYear()===c,x=[];for(let w=0;w<m;w++)x.push(null);for(let w=1;w<=p;w++)x.push(w);const f=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],R=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"];return e.jsxs("div",{className:"calendar-container",children:[e.jsxs("div",{className:"calendar-header",children:[e.jsxs("div",{className:"calendar-title",children:[e.jsx(ls,{size:16}),e.jsx("span",{children:"Calendário de Estudos"})]}),e.jsxs("div",{className:"calendar-navigation",children:[e.jsx("button",{className:"calendar-nav-btn",onClick:h,children:e.jsx(os,{size:16})}),e.jsxs("span",{className:"calendar-month-year",children:[f[d]," ",c]}),e.jsx("button",{className:"calendar-nav-btn",onClick:N,children:e.jsx(Se,{size:16})})]})]}),e.jsxs("div",{className:"calendar-grid",children:[R.map(w=>e.jsx("div",{className:"calendar-day-header",children:w},w)),x.map((w,A)=>{if(w===null)return e.jsx("div",{className:"calendar-day-empty"},`empty-${A}`);const j=S(w),k=v(w);return e.jsxs("div",{className:`calendar-day ${k?"today":""} ${j.hasSessions||j.hasReviews?"has-events":""}`,onClick:()=>a&&a(new Date(c,d,w)),children:[e.jsx("span",{className:"calendar-day-number",children:w}),e.jsxs("div",{className:"calendar-day-indicators",children:[j.hasSessions&&e.jsx("div",{className:"calendar-indicator study",title:`${j.sessionsCount} sessão(ões) - ${j.totalHours.toFixed(1)}h`,children:j.sessionsCount}),j.hasReviews&&e.jsx("div",{className:"calendar-indicator review",title:`${j.reviewsCount} revisão(ões) agendada(s)`,children:"R"})]})]},`day-${w}-${d}-${c}`)})]}),e.jsxs("div",{className:"calendar-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color study"}),e.jsx("span",{children:"Sessões de Estudo"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color review"}),e.jsx("span",{children:"Revisões Agendadas"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color today"}),e.jsx("span",{children:"Hoje"})]})]})]})},F=(s,t)=>{try{const a=JSON.stringify(t);return localStorage.setItem(s,a),!0}catch(a){return console.error("Erro ao salvar no localStorage:",a),!1}},te=(s,t=null)=>{try{const a=localStorage.getItem(s);return a===null?t:JSON.parse(a)}catch(a){return console.error("Erro ao carregar do localStorage:",a),t}};function Ts(){const[s,t]=u.useState(!0),[a,r]=u.useState({message:"",type:"",isVisible:!1}),[n,l]=u.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[c,d]=u.useState({}),[i,o]=u.useState(null),[p,m]=u.useState(!1),[h,N]=u.useState("Carregando dados..."),[S,v]=u.useState("overview"),[x,f]=u.useState([]),[R,w]=u.useState(null),[A,j]=u.useState([]),[k,z]=u.useState([]),[T,C]=u.useState([]),[b,D]=u.useState([]),[M,O]=u.useState(!1),[U,Q]=u.useState(null),[X,_]=u.useState([]),[P,J]=u.useState(!1),[ee,$]=u.useState(!1),[G,ge]=u.useState(null),[gt,re]=u.useState(!1),[be,ie]=u.useState(null),[bt,ne]=u.useState(!1),[ve,le]=u.useState(null),[vt,oe]=u.useState(null),[jt,je]=u.useState(null),[yt,Oe]=u.useState(!1),[Nt,ze]=u.useState(null),[St,ye]=u.useState(!1),[wt,Me]=u.useState(!1),[Ct,Ae]=u.useState(null),It=g=>{G?Mt(G.id,g):zt(g)},Et=g=>{be?Tt(be.id,g):At(g)},kt=g=>{ve?$t(ve.id,g):Lt(g)},L=(g,y="info")=>{r({message:g,type:y,isVisible:!0}),setTimeout(()=>{r(E=>({...E,isVisible:!1}))},3e3)},Ne=g=>k.filter(y=>y.subjectId===g).reduce((y,E)=>y+(E.duration||0),0)/60,Dt=g=>{const y=T.filter(I=>I.subjectId===g),E=y.filter(I=>I.isStudied);return y.length>0?E.length/y.length*100:0},Pt=()=>{const g=new Date().toISOString().split("T")[0];return T.filter(y=>y.nextReviewDate&&y.nextReviewDate<=g)},Rt=()=>{if(Pt().length>0)return"Hoje";const y=T.filter(E=>E.nextReviewDate&&E.nextReviewDate>new Date().toISOString().split("T")[0]).sort((E,I)=>new Date(E.nextReviewDate)-new Date(I.nextReviewDate));return y.length>0?new Date(y[0].nextReviewDate).toLocaleDateString("pt-BR"):"-"},Ot=g=>{w(g),F("activeProfileId",g)},zt=g=>{const y={id:Date.now().toString(),...g,createdAt:new Date().toISOString()},E=[...x,y];f(E),w(y.id),F("studyProfiles",E),F("activeProfileId",y.id),$(!1),ge(null),L("Perfil criado e selecionado com sucesso!","success")},Mt=(g,y)=>{const E=x.map(I=>I.id===g?{...I,...y}:I);f(E),F("studyProfiles",E),$(!1),ge(null),L("Perfil atualizado com sucesso!","success")},At=g=>{const y={id:Date.now().toString(),profileId:R,...g,createdAt:new Date().toISOString()},E=[...A,y];j(E),F("subjects",E),re(!1),ie(null),L("Matéria criada com sucesso!","success")},Tt=(g,y)=>{const E=A.map(I=>I.id===g?{...I,...y}:I);j(E),F("subjects",E),re(!1),ie(null),L("Matéria atualizada com sucesso!","success")},Ft=g=>{const y=A.filter(B=>B.id!==g),E=T.filter(B=>B.subjectId!==g),I=k.filter(B=>B.subjectId!==g);j(y),C(E),z(I),F("subjects",y),F("syllabusItems",E),F("sessions",I),L("Matéria deletada com sucesso!","success")},Lt=g=>{const y={id:Date.now().toString(),profileId:R,...g,createdAt:new Date().toISOString()},E=[...k,y];z(E),F("sessions",E),ne(!1),le(null),oe(null),je(null),L("Sessão registrada com sucesso!","success")},$t=(g,y)=>{const E=k.map(I=>I.id===g?{...I,...y}:I);z(E),F("sessions",E),ne(!1),le(null),oe(null),je(null),L("Sessão atualizada com sucesso!","success")},Te=()=>{const g={studyProfiles:x,subjects:A,studySessions:k,simulados:b,syllabusItems:T,exportDate:new Date().toISOString()},y=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),E=URL.createObjectURL(y),I=document.createElement("a");I.href=E,I.download=`organizador-estudos-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(E),L("Dados exportados com sucesso!","success")},Bt=g=>{const y=new FileReader;y.onload=E=>{try{const I=JSON.parse(E.target.result);if(!I.timestamp)throw new Error("Arquivo de backup inválido");l({isOpen:!0,title:"Importar Dados",message:"A importação criará um novo concurso com os dados do arquivo JSON. Os dados atuais serão preservados. Deseja continuar?",onConfirm:()=>{try{if(I.studyProfiles&&I.studyProfiles.length>0){const B=I.studyProfiles[0],V={...B,id:Date.now().toString(),name:`${B.name} (Importado)`},se=[...x,V];f(se),w(V.id),F("studyProfiles",se),F("activeProfileId",V.id),I.subjects&&(j(I.subjects),F("subjects",I.subjects)),I.sessions&&(z(I.sessions),F("sessions",I.sessions)),I.syllabusItems&&(C(I.syllabusItems),F("syllabusItems",I.syllabusItems)),L("Dados importados com sucesso! Novo concurso criado.","success")}else L("Nenhum perfil encontrado no arquivo","error")}catch{L("Erro ao processar dados importados","error")}l({...n,isOpen:!1})}})}catch{L("Erro ao ler arquivo JSON","error")}},y.readAsText(g)},Ut=()=>e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{className:"loading-message",children:h}),e.jsx("div",{className:"loading-progress",children:e.jsx("div",{className:"loading-bar"})})]}),Wt=()=>{const g=x.find(E=>E.id===R),y={overview:"Visão Geral",subjects:"Matérias",calendar:"Calendário",reports:"Relatórios"};return e.jsxs("div",{className:"breadcrumb",children:[e.jsxs("span",{className:"breadcrumb-item",children:["📚 ",(g==null?void 0:g.name)||"Nenhum Concurso"]}),e.jsx("span",{className:"breadcrumb-separator",children:"›"}),e.jsx("span",{className:"breadcrumb-item active",children:y[S]})]})},_t=()=>{const g=H.length,y=K.length,E=K.filter(V=>V.isStudied).length,I=y>0?(E/y*100).toFixed(0):0,B=Y.reduce((V,se)=>V+se.duration,0);return e.jsxs("div",{className:"quick-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:g}),e.jsx("span",{className:"stat-label",children:"Matérias"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsxs("span",{className:"stat-value",children:[I,"%"]}),e.jsx("span",{className:"stat-label",children:"Progresso"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsxs("span",{className:"stat-value",children:[B.toFixed(1),"h"]}),e.jsx("span",{className:"stat-label",children:"Estudadas"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsxs("span",{className:"stat-value",children:[E,"/",y]}),e.jsx("span",{className:"stat-label",children:"Itens"})]})]})},qt=({message:g,type:y,isVisible:E})=>{if(!E)return null;const I={success:"✅",error:"❌",warning:"⚠️",info:"ℹ️"};return e.jsxs("div",{className:`toast toast-${y}`,children:[e.jsx("span",{className:"toast-icon",children:I[y]||I.info}),e.jsx("span",{className:"toast-message",children:g})]})},Ht=({isOpen:g,title:y,message:E,onConfirm:I,onCancel:B})=>g?e.jsx("div",{className:"modal-overlay",onClick:B,children:e.jsxs("div",{className:"modal",onClick:V=>V.stopPropagation(),children:[e.jsx("h2",{children:y}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{style:{color:"#e2e8f0",marginBottom:"20px"},children:E}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:B,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger",onClick:I,children:"Confirmar"})]})]})]})}):null;u.useEffect(()=>{const g=y=>{(y.ctrlKey||y.metaKey)&&y.key==="n"&&(y.preventDefault(),$(!0)),(y.ctrlKey||y.metaKey)&&y.key==="r"&&(y.preventDefault(),ye(!0)),(y.ctrlKey||y.metaKey)&&y.key==="e"&&(y.preventDefault(),Te())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[]),u.useEffect(()=>{(async()=>{try{t(!0),N("Inicializando aplicativo..."),await new Promise(q=>setTimeout(q,300)),N("Carregando perfis...");const y=te("studyProfiles")||[],E=te("activeProfileId")||null;await new Promise(q=>setTimeout(q,200)),N("Carregando matérias...");const I=te("subjects")||[],B=te("sessions")||[],V=te("syllabusItems")||[],se=te("simulados")||[],Jt=te("globalEditais")||[];if(y.length>0&&(f(y),E&&y.some(q=>q.id===E)?w(E):w(y[0].id)),I.length===0){const q=[{id:"1",name:"Matemática",color:"#3B82F6",weight:3,accuracy:75,syllabus:[{id:"1",name:"Álgebra",isCompleted:!1},{id:"2",name:"Geometria",isCompleted:!0},{id:"3",name:"Trigonometria",isCompleted:!1}]},{id:"2",name:"Português",color:"#10B981",weight:2,accuracy:80,syllabus:[{id:"4",name:"Gramática",isCompleted:!0},{id:"5",name:"Literatura",isCompleted:!1}]}];j(q),F("subjects",q)}else j(I);if(B.length===0){const q=[{id:"1",subjectId:"1",subjectName:"Matemática",date:"2025-01-26",duration:2,syllabusItemId:"1",syllabusItemName:"Álgebra",accuracy:75,observations:"Estudei equações do segundo grau"}];z(q),F("sessions",q)}else z(B);C(V),D(se),_(Jt),N("Finalizando..."),await new Promise(q=>setTimeout(q,200))}catch{L("Erro ao carregar dados","error")}finally{t(!1)}})()},[]);const H=A.filter(g=>g.profileId===R),Y=k.filter(g=>g.profileId===R),Vt=b.filter(g=>g.profileId===R),K=T.filter(g=>H.some(y=>y.id===g.subjectId));return s?e.jsx("div",{className:"app-container",children:e.jsx(Ut,{})}):e.jsxs("div",{className:"app-container",children:[e.jsx(Ms,{setIsProgressReportModalOpen:ye,handleExportData:Te,handleImportData:Bt,studyProfiles:x,activeProfileId:R,setActiveProfileId:Ot,onOpenProfileModal:()=>$(!0)}),R&&e.jsxs("div",{className:"navigation-section",children:[e.jsx(Wt,{}),e.jsx(_t,{})]}),R?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",children:[e.jsxs("h2",{children:[e.jsx(Ze,{size:20}),"Estatísticas Rápidas"]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsxs("div",{className:"stat-value",children:[Y.reduce((g,y)=>g+(y.duration||0),0)/60,"h"]}),e.jsx("div",{className:"stat-label",children:"Total Estudado"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:Y.length}),e.jsx("div",{className:"stat-label",children:"Sessões"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:Vt.length}),e.jsx("div",{className:"stat-label",children:"Simulados"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsxs("div",{className:"stat-value",children:[K.length>0?(K.reduce((g,y)=>g+(y.accuracy||0),0)/K.length).toFixed(0):0,"%"]}),e.jsx("div",{className:"stat-label",children:"Média de Acerto Geral"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:Rt()}),e.jsx("div",{className:"stat-label",children:"Próxima Revisão Urgente"})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{O(!0)},children:"Registrar Simulado"}),X.length>0&&H.length>0&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>J(!0),children:"Importar Itens de Edital"})]}),H.length>0&&e.jsxs("div",{className:"study-cycle-indicator",children:[e.jsxs("div",{className:"study-cycle-header",children:[e.jsx("span",{className:"study-cycle-icon",children:"🔄"}),e.jsx("span",{className:"study-cycle-title",children:"Ciclo de Estudos Visual"})]}),e.jsx("div",{className:"study-cycle-subjects",children:H.map((g,y)=>e.jsxs("div",{className:"study-cycle-item",style:{backgroundColor:g.color+"20",borderLeft:`3px solid ${g.color}`},children:[e.jsx("span",{className:"cycle-subject-name",children:g.name}),e.jsxs("span",{className:"cycle-subject-weight",children:["Peso: ",g.weight||1]})]},g.id))})]})]}),H.length===0?e.jsx("div",{className:"card",children:e.jsxs("div",{className:"welcome-section",children:[e.jsx("h2",{children:"Nenhuma matéria cadastrada"}),e.jsx("p",{children:"Adicione sua primeira matéria para começar a organizar seus estudos."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>re(!0),children:[e.jsx(de,{size:20}),"Adicionar Primeira Matéria"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card",children:e.jsx(As,{studySessions:Y,syllabusItems:K,onDateClick:g=>{}})}),e.jsx(zs,{subjects:H,studySessions:Y,setIsSubjectModalOpen:re,setCurrentSubjectForSession:oe,setIsSessionModalOpen:ne,setCurrentSubjectForSyllabus:ze,setIsSyllabusModalOpen:Oe,setEditingSubject:ie,setConfirmationDialog:l,handleDeleteSubject:Ft,getSubjectStudyTime:Ne,calculateSubjectProgress:Dt,setIsSessionHistoryModalOpen:Me,setSelectedSubjectForHistory:Ae}),e.jsxs("div",{className:"card",children:[e.jsxs("h2",{children:[e.jsx(Ke,{size:20}),"Visão Geral das Matérias e Edital"]}),e.jsx(Os,{subjects:H,syllabusItems:K,setSyllabusItems:C,expandedSubjects:c,setExpandedSubjects:d,getSubjectStudyTime:Ne,setSelectedSyllabusItem:o,setIsItemDetailsModalOpen:m,studySessions:Y})]})]})]}):e.jsx("div",{className:"card",children:e.jsxs("div",{className:"welcome-section",children:[e.jsx("h2",{children:"Bem-vindo ao Organizador de Estudos!"}),e.jsx("p",{children:"Crie ou selecione um perfil de concurso para começar a organizar seus estudos."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>$(!0),children:[e.jsx(de,{size:20}),"Criar Primeiro Perfil"]})]})}),e.jsx(Cs,{isOpen:ee,onClose:()=>{$(!1),ge(null)},editingProfile:G,onSubmit:It,showToast:L}),e.jsx(Is,{isOpen:gt,onClose:()=>{re(!1),ie(null)},editingSubject:be,onSubmit:Et,showToast:L}),e.jsx(Rs,{isOpen:bt,onClose:()=>{ne(!1),le(null),oe(null),je(null)},editingSession:ve,initialSessionData:jt,currentSubjectForSession:vt,subjects:H,syllabusItems:K,onSubmit:kt,showToast:L}),e.jsx(Es,{isOpen:p,onClose:()=>{m(!1),o(null)},selectedItem:i,subjects:H,studySessions:Y}),e.jsx(ks,{isOpen:yt,onClose:()=>{Oe(!1),ze(null)},currentSubjectForSyllabus:Nt,syllabusItems:K,setSyllabusItems:C,showToast:L}),e.jsx(Ps,{isOpen:St,onClose:()=>ye(!1),subjects:H,studySessions:Y,syllabusItems:K,getSubjectStudyTime:Ne}),e.jsx(Ds,{isOpen:wt,onClose:()=>{Me(!1),Ae(null)},selectedSubject:Ct,studySessions:Y,setEditingSession:le,setIsSessionModalOpen:ne,setConfirmationDialog:l}),e.jsx(qt,{message:a.message,type:a.type,isVisible:a.isVisible}),e.jsx(Ht,{isOpen:n.isOpen,title:n.title,message:n.message,onConfirm:n.onConfirm,onCancel:()=>l({isOpen:!1,title:"",message:"",onConfirm:()=>{}})}),M&&e.jsx("div",{className:"modal-overlay",onClick:g=>{g.target===g.currentTarget&&(O(!1),Q(null))},children:e.jsxs("div",{className:"modal",onClick:g=>g.stopPropagation(),children:[e.jsxs("h2",{children:[U?"Editar Simulado":"Registrar Simulado",e.jsx("button",{className:"close-btn",onClick:()=>{O(!1),Q(null)},children:"×"})]}),e.jsx(Fs,{simulados:b,setSimulados:D,editingSimulado:U,setEditingSimulado:Q,activeProfileId:R,onClose:()=>{O(!1),Q(null)},showToast:L})]})}),P&&e.jsx("div",{className:"modal-overlay",onClick:g=>{g.target===g.currentTarget&&J(!1)},children:e.jsxs("div",{className:"modal",onClick:g=>g.stopPropagation(),children:[e.jsxs("h2",{children:["Importar Itens de Edital",e.jsx("button",{className:"close-btn",onClick:()=>J(!1),children:"×"})]}),e.jsx(Ls,{globalEditais:X,subjects:H,syllabusItems:T,setSyllabusItems:C,onClose:()=>J(!1),showToast:L})]})})]})}function Fs({simulados:s,setSimulados:t,editingSimulado:a,setEditingSimulado:r,activeProfileId:n,onClose:l,showToast:c}){const[d,i]=u.useState((a==null?void 0:a.tipo)||"objetivo"),[o,p]=u.useState((a==null?void 0:a.data)||new Date().toISOString().split("T")[0]),[m,h]=u.useState((a==null?void 0:a.quantidadeQuestoes)||""),[N,S]=u.useState((a==null?void 0:a.acertosObjetivas)||""),[v,x]=u.useState((a==null?void 0:a.notaSubjetiva)||""),[f,R]=u.useState((a==null?void 0:a.observacoes)||""),w=()=>{if(d==="objetivo"){const j=parseFloat(m),k=parseFloat(N);return!isNaN(j)&&j>0&&!isNaN(k)?(k/j*100).toFixed(2):""}else return v},A=j=>{j.preventDefault();const k=w();if(!n){c("Selecione um perfil","error");return}if(d==="objetivo"&&(!m||!N)){c("Informe questões e acertos","error");return}if(d==="subjetivo"&&!v){c("Informe a nota","error");return}if(a){const z=s.map(T=>T.id===a.id?{...T,tipo:d,data:o,quantidadeQuestoes:m?Number(m):null,acertosObjetivas:N?Number(N):null,notaSubjetiva:v?Number(v):null,notaFinal:k?Number(k):null,observacoes:f}:T);t(z),F("simulados",z),c("Simulado atualizado","success")}else{const z={id:Date.now().toString(),profileId:n,tipo:d,data:o,quantidadeQuestoes:m?Number(m):null,acertosObjetivas:N?Number(N):null,notaSubjetiva:v?Number(v):null,notaFinal:k?Number(k):null,observacoes:f,createdAt:new Date().toISOString()},T=[...s,z];t(T),F("simulados",T),c("Simulado registrado","success")}l()};return e.jsxs("form",{onSubmit:A,className:"space-y-3",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo"}),e.jsxs("select",{value:d,onChange:j=>i(j.target.value),className:"form-input",children:[e.jsx("option",{value:"objetivo",children:"Objetivo"}),e.jsx("option",{value:"subjetivo",children:"Subjetivo"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Data"}),e.jsx("input",{type:"date",value:o,onChange:j=>p(j.target.value),className:"form-input"})]}),d==="objetivo"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Quantidade de Questões"}),e.jsx("input",{type:"number",value:m,onChange:j=>h(j.target.value),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Acertos"}),e.jsx("input",{type:"number",value:N,onChange:j=>S(j.target.value),className:"form-input"})]})]}),d==="subjetivo"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nota Subjetiva (0-100 ou escala utilizada)"}),e.jsx("input",{type:"number",value:v,onChange:j=>x(j.target.value),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Observações"}),e.jsx("textarea",{value:f,onChange:j=>R(j.target.value),className:"form-input",rows:3})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nota Final"}),e.jsx("input",{type:"text",value:w(),readOnly:!0,className:"form-input bg-slate-100"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:l,className:"btn btn-secondary",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:a?"Salvar":"Registrar"})]})]})}function Ls({globalEditais:s,subjects:t,syllabusItems:a,setSyllabusItems:r,onClose:n,showToast:l}){var x;const[c,d]=u.useState(""),[i,o]=u.useState(((x=t[0])==null?void 0:x.id)||""),[p,m]=u.useState(!1),[h,N]=u.useState(""),S=s.find(f=>f.id===c),v=()=>{if(!S||!i){l("Selecione edital e matéria","error");return}const R=(S.itens||[]).map(A=>({id:Date.now().toString()+Math.random().toString(36).slice(2),subjectId:i,name:(p&&h?h+" ":"")+A.name,isStudied:!1,createdAt:new Date().toISOString()})),w=[...a,...R];r(w),F("syllabusItems",w),l(`${R.length} itens importados`,"success"),n()};return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Edital"}),e.jsxs("select",{className:"form-input",value:c,onChange:f=>d(f.target.value),children:[e.jsx("option",{value:"",children:"Selecione..."}),s.map(f=>e.jsxs("option",{value:f.id,children:[f.nome," (",f.itens.length,")"]},f.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Matéria Destino"}),e.jsx("select",{className:"form-input",value:i,onChange:f=>o(f.target.value),children:t.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))})]}),e.jsxs("div",{className:"form-group flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:f=>m(f.target.checked)}),e.jsx("span",{className:"text-sm",children:"Adicionar prefixo aos itens"})]}),p&&e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",className:"form-input",placeholder:"Prefixo (ex: TJ2025)",value:h,onChange:f=>N(f.target.value)})}),S&&e.jsxs("div",{className:"text-xs text-slate-500 max-h-32 overflow-y-auto border p-2 rounded",children:["Pré-visualização:",e.jsxs("ul",{className:"mt-1 space-y-1",children:[S.itens.slice(0,10).map(f=>e.jsx("li",{children:(p&&h?h+" ":"")+f.name},f.id)),S.itens.length>10&&e.jsxs("li",{className:"italic",children:["... (+",S.itens.length-10," itens)"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:v,disabled:!c||!i,children:"Importar"})]})]})}function $s(s){const t=s.split(`
`).map(l=>l.trim()).filter(l=>l.length>0),a=[];let r=null,n=null;return t.forEach(l=>{const c=l.match(/^(\d+(?:\.\d+)*)\.?\s+(.*)$/);if(!c)return;const d=c[1],i=c[2].trim(),o=d.split(".").length;if(o===1)r={id:Date.now().toString()+Math.random().toString(36).slice(2),nome:`${d}. ${i}`,submaterias:[]},a.push(r),n=null;else if(o===2)r||(r={id:Date.now().toString()+Math.random().toString(36).slice(2),nome:"Sem Matéria "+d.split(".")[0],submaterias:[]},a.push(r)),n={id:Date.now().toString()+Math.random().toString(36).slice(2),nome:`${d}. ${i}`,subtopicos:[]},r.submaterias.push(n);else{if(!r)return;n||(n={id:Date.now().toString()+Math.random().toString(36).slice(2),nome:"Submatéria desconhecida",subtopicos:[]},r.submaterias.push(n)),n.subtopicos.push({id:Date.now().toString()+Math.random().toString(36).slice(2),nome:`${d}. ${i}`})}}),a}function Bs({onParsed:s}){const[t,a]=u.useState(""),[r,n]=u.useState([]),[l,c]=u.useState({}),d=()=>{const o=$s(t);n(o),s&&s(o)},i=o=>c(p=>({...p,[o]:!p[o]}));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-wide font-semibold text-slate-600 mb-1",children:"Texto do Edital (numerado)"}),e.jsx("textarea",{value:t,onChange:o=>a(o.target.value),placeholder:`Exemplo:
1. Língua Portuguesa
1.1 Gramática
1.1.1 Classes de palavras
1.1.2 Sintaxe
2. Matemática
2.1 Álgebra
2.1.1 Equações`,className:"w-full h-40 border rounded p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white text-slate-800 placeholder-slate-400"}),e.jsxs("button",{onClick:d,disabled:!t.trim(),className:"mt-2 px-4 py-2 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-1",children:[e.jsx(cs,{size:16})," Processar Hierarquia"]})]}),r.length>0&&e.jsxs("div",{className:"border rounded-lg p-3 bg-slate-50",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-2 flex items-center",children:[e.jsx(ds,{size:16,className:"mr-1 text-indigo-600"}),"Pré-visualização (",r.length," matérias)"]}),e.jsx("ul",{className:"space-y-1 text-sm",children:r.map(o=>e.jsxs("li",{className:"",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("button",{type:"button",onClick:()=>i(o.id),className:"mr-1 text-slate-600 hover:text-slate-800 mt-0.5",children:l[o.id]?e.jsx(ce,{size:16}):e.jsx(Se,{size:16})}),e.jsx("span",{className:"font-medium text-slate-800",children:o.nome})]}),l[o.id]&&o.submaterias.length>0&&e.jsx("ul",{className:"ml-5 mt-1 space-y-1 border-l pl-3 border-slate-300",children:o.submaterias.map(p=>e.jsxs("li",{children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("button",{type:"button",onClick:()=>i(p.id),className:"mr-1 text-slate-500 hover:text-slate-700 mt-0.5",children:l[p.id]?e.jsx(ce,{size:14}):e.jsx(Se,{size:14})}),e.jsx("span",{className:"text-slate-700",children:p.nome})]}),l[p.id]&&p.subtopicos.length>0&&e.jsx("ul",{className:"ml-5 mt-1 space-y-0.5 list-disc marker:text-indigo-500",children:p.subtopicos.map(m=>e.jsx("li",{className:"text-slate-600",children:m.nome},m.id))})]},p.id))})]},o.id))})]})]})}const Us={apiKey:"AIzaSyAxRywmrAPxIER9x8kWicwUWsBKteQ54_s",authDomain:"organizadorestudo.firebaseapp.com",projectId:"organizadorestudo",storageBucket:"organizadorestudo.firebasestorage.app",messagingSenderId:"872263455038",appId:"1:872263455038:web:4b1ff1de308bd050689c6f",measurementId:"G-WKWKHT1SKD"},rt=hs(Us),nt=ps(rt);xs(rt);console.log("🔥 Firebase configurado e conectado");const it="config",lt="globalEditais";function Ws(s){return(s||[]).map(t=>t.materias?t:t.hierarquia?{id:t.id,nome:t.nome||t.nomeConcurso||"Concurso",descricao:t.descricao||"",materias:t.hierarquia.map(a=>({id:a.id,nome:a.nome,submaterias:(a.submaterias||[]).map(r=>({id:r.id,nome:r.nome,subtopicos:(r.subtopicos||[]).map(n=>({id:n.id,nome:n.nome}))}))})),createdAt:t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt||t.createdAt||new Date().toISOString()}:t.itens&&t.itens.length>0?{id:t.id,nome:t.nome||"Concurso",descricao:t.descricao||"",materias:[{id:"geral-"+t.id,nome:"Geral",submaterias:[{id:"geral-sub-"+t.id,nome:"Conteúdo",subtopicos:t.itens.map(a=>({id:a.id||Date.now().toString()+Math.random().toString(36).slice(2),nome:a.name||a.nome||a}))}]}],createdAt:t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt||t.createdAt||new Date().toISOString()}:{id:t.id||Date.now().toString()+Math.random().toString(36).slice(2),nome:t.nome||"Concurso",descricao:t.descricao||"",materias:[],createdAt:t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt||t.createdAt||new Date().toISOString()})}async function De(){try{const s=Xe(et(nt,it),lt),t=await fs(s);if(!t.exists())return[];const a=t.data();if(a.concursos)return a.concursos;const r=a.editais||[];return Ws(r)}catch(s){return console.error("Erro ao buscar editais globais",s),[]}}async function Pe(s){try{const t=Xe(et(nt,it),lt);return await gs(t,{concursos:s,updatedAt:bs.now()},{merge:!0}),!0}catch(t){return console.error("Erro ao salvar concursos globais",t),!1}}async function _s(s,t){try{const r=(await De()).map(n=>n.id===s?n.materias?n:{...n,itens:[...n.itens||[],...t]}:n);return await Pe(r),r}catch(a){throw console.error("Erro ao anexar itens",a),a}}async function qs(s){const a=[...await De(),{...s,createdAt:s.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}];return await Pe(a),a}function Hs(){const[s,t]=u.useState([]),[a,r]=u.useState(null),[n,l]=u.useState(""),[c,d]=u.useState(""),[i,o]=u.useState([]),[p,m]=u.useState([]),[h,N]=u.useState(!0),[S,v]=u.useState(!1),[x,f]=u.useState(""),R=async()=>{v(!0);const C=await De();t(C),F("globalEditais",C),v(!1),f(`Carregado ${C.length} edital(is) do servidor`),setTimeout(()=>f(""),3e3)};u.useEffect(()=>{R()},[]);const w=async C=>{t(C),F("globalEditais",C),await Pe(C)},A=async()=>{if(!n.trim()||h&&p.length===0)return;v(!0);const C={id:Date.now().toString(),nome:n.trim(),descricao:c.trim(),itens:h?[]:i,hierarquia:h?p:null,createdAt:new Date().toISOString()},b=await qs(C);t(b),F("globalEditais",b),r(C.id),l(""),d(""),o([]),m([]),v(!1),f("Edital criado e sincronizado"),setTimeout(()=>f(""),3e3)},j=async C=>{if(!confirm("Remover este edital?"))return;const b=s.filter(D=>D.id!==C);await w(b),a===C&&r(null),f("Edital removido"),setTimeout(()=>f(""),2500)},k=s.find(C=>C.id===a)||null,z=C=>{const b=C.map(D=>({id:Date.now().toString()+Math.random().toString(36).slice(2),name:D,createdAt:new Date().toISOString()}));o(D=>[...D,...b])},T=async()=>{if(!k)return;v(!0);const C=i.map(D=>({...D,id:D.id||Date.now().toString()+Math.random().toString(36).slice(2)})),b=await _s(k.id,C);t(b),F("globalEditais",b),o([]),v(!1),f("Itens adicionados e sincronizados"),setTimeout(()=>f(""),3e3)};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto text-slate-800",style:{background:"#f8fafc",minHeight:"100vh"},children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-slate-900",children:"Admin - Cadastro de Editais"}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Gerencie os editais globais disponíveis para importação pelos usuários."}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsxs("button",{onClick:R,className:"px-3 py-2 bg-indigo-600 text-white text-sm rounded flex items-center gap-1 hover:bg-indigo-700",children:[e.jsx(us,{size:16})," Atualizar"]}),e.jsxs("button",{onClick:()=>w(s),className:"px-3 py-2 bg-emerald-600 text-white text-sm rounded flex items-center gap-1 hover:bg-emerald-700",children:[e.jsx(Fe,{size:16})," Forçar Sincronização"]}),S&&e.jsxs("span",{className:"flex items-center text-sm text-slate-500",children:[e.jsx(ms,{size:16,className:"mr-1 animate-spin"})," Salvando..."]}),x&&e.jsx("span",{className:"text-xs px-2 py-1 bg-slate-200 rounded text-slate-700",children:x})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 border rounded-lg p-4 bg-white shadow-sm",children:[e.jsxs("h2",{className:"font-semibold mb-3 flex items-center justify-between",children:["Editais Cadastrados ",e.jsx("span",{className:"text-xs bg-slate-100 px-2 py-0.5 rounded",children:s.length})]}),e.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto custom-scrollbar",children:s.map(C=>e.jsxs("li",{className:`p-2 border rounded cursor-pointer flex items-center justify-between transition-colors ${a===C.id?"border-indigo-500 bg-indigo-50 shadow-sm":"border-slate-200 hover:bg-slate-100"}`,onClick:()=>r(C.id),children:[e.jsxs("div",{className:"mr-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:C.nome}),e.jsxs("div",{className:"text-xs text-slate-500",children:[C.itens.length," itens"]})]}),e.jsx("button",{className:"text-red-500 hover:text-red-600",onClick:b=>{b.stopPropagation(),j(C.id)},title:"Excluir",children:e.jsx(ke,{size:16})})]},C.id))})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-5 bg-white shadow-sm",children:[e.jsxs("h2",{className:"font-semibold mb-4 flex items-center text-slate-900",children:[e.jsx(de,{size:18,className:"mr-2 text-indigo-600"}),"Novo Edital"]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-xs font-medium text-slate-600",children:[e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:h,onChange:()=>N(!0)})," Hierarquia"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!h,onChange:()=>N(!1)})," Lista Simples"]})]}),e.jsxs("div",{className:"grid gap-4 mb-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide font-semibold text-slate-600",children:"Nome"}),e.jsx("input",{value:n,onChange:C=>l(C.target.value),placeholder:"Ex: TJ-2025",className:"border px-3 py-2 rounded text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white text-slate-800 placeholder-slate-400"})]}),e.jsxs("div",{className:"flex flex-col gap-1 md:col-span-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide font-semibold text-slate-600",children:"Descrição"}),e.jsx("textarea",{value:c,onChange:C=>d(C.target.value),placeholder:"Descrição / Observações",className:"border px-3 py-2 rounded text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white text-slate-800 placeholder-slate-400"})]})]}),h&&p.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded text-xs text-indigo-700 font-medium flex items-center justify-between",children:[e.jsxs("span",{children:[p.length," matéria(s) estruturadas prontas."]}),e.jsx("button",{onClick:()=>m([]),className:"text-indigo-600 hover:underline",children:"Limpar"})]}),!h&&i.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded text-xs text-indigo-700 font-medium flex items-center justify-between",children:[e.jsxs("span",{children:[i.length," item(s) prontos para salvar."]}),e.jsx("button",{onClick:()=>o([]),className:"text-indigo-600 hover:underline",children:"Limpar"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:A,disabled:!n.trim()||(h?p.length===0:!1),className:"px-4 py-2 bg-indigo-600 text-white rounded text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-1",children:[e.jsx(Fe,{size:16})," Salvar"]}),k&&i.length>0&&e.jsx("button",{onClick:T,className:"px-4 py-2 bg-emerald-600 text-white rounded text-sm font-medium hover:bg-emerald-700",children:"Adicionar ao Edital Selecionado"}),e.jsx("button",{onClick:()=>o([]),className:"px-4 py-2 bg-slate-600 text-white rounded text-sm font-medium hover:bg-slate-700",children:"Limpar Temporários"})]})]}),e.jsxs("div",{className:"border rounded-lg p-5 bg-white shadow-sm",children:[e.jsxs("h2",{className:"font-semibold mb-2 flex items-center text-slate-900",children:[e.jsx(Je,{size:18,className:"mr-2 text-indigo-600"}),"Processar Texto de Edital"]}),h?e.jsx(Bs,{onParsed:C=>m(C)}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-slate-600 mb-4",children:"Modo lista simples."}),e.jsx(at,{onAddMultipleItems:C=>z(C),showToast:C=>console.log(C),syllabusItems:[],onUpdateItemName:()=>{},onDeleteItem:()=>{},onMoveItemUp:()=>{},onMoveItemDown:()=>{}})]})]}),k&&e.jsxs("div",{className:"border rounded-lg p-5 bg-white shadow-sm",children:[e.jsxs("h2",{className:"font-semibold mb-4 text-slate-900",children:["Itens do Edital: ",e.jsx("span",{className:"text-indigo-700",children:k.nome})]}),e.jsxs("div",{className:"text-xs text-slate-500 mb-2",children:["Total: ",k.itens.length]}),e.jsx("ul",{className:"text-sm space-y-1 max-h-72 overflow-y-auto custom-scrollbar divide-y divide-slate-100",children:k.itens.map(C=>e.jsx("li",{className:"py-1.5 flex items-start",children:e.jsx("span",{className:"text-slate-700 whitespace-pre-wrap leading-snug",children:C.name})},C.id))})]})]})]})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ue(){return ue=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},ue.apply(this,arguments)}var Z;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Z||(Z={}));const $e="popstate";function Vs(s){s===void 0&&(s={});function t(r,n){let{pathname:l,search:c,hash:d}=r.location;return Ce("",{pathname:l,search:c,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(r,n){return typeof n=="string"?n:ct(n)}return Gs(t,a,null,s)}function W(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function ot(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Js(){return Math.random().toString(36).substr(2,8)}function Be(s,t){return{usr:s.state,key:s.key,idx:t}}function Ce(s,t,a,r){return a===void 0&&(a=null),ue({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?pe(t):t,{state:a,key:t&&t.key||r||Js()})}function ct(s){let{pathname:t="/",search:a="",hash:r=""}=s;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function pe(s){let t={};if(s){let a=s.indexOf("#");a>=0&&(t.hash=s.substr(a),s=s.substr(0,a));let r=s.indexOf("?");r>=0&&(t.search=s.substr(r),s=s.substr(0,r)),s&&(t.pathname=s)}return t}function Gs(s,t,a,r){r===void 0&&(r={});let{window:n=document.defaultView,v5Compat:l=!1}=r,c=n.history,d=Z.Pop,i=null,o=p();o==null&&(o=0,c.replaceState(ue({},c.state,{idx:o}),""));function p(){return(c.state||{idx:null}).idx}function m(){d=Z.Pop;let x=p(),f=x==null?null:x-o;o=x,i&&i({action:d,location:v.location,delta:f})}function h(x,f){d=Z.Push;let R=Ce(v.location,x,f);o=p()+1;let w=Be(R,o),A=v.createHref(R);try{c.pushState(w,"",A)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;n.location.assign(A)}l&&i&&i({action:d,location:v.location,delta:1})}function N(x,f){d=Z.Replace;let R=Ce(v.location,x,f);o=p();let w=Be(R,o),A=v.createHref(R);c.replaceState(w,"",A),l&&i&&i({action:d,location:v.location,delta:0})}function S(x){let f=n.location.origin!=="null"?n.location.origin:n.location.href,R=typeof x=="string"?x:ct(x);return R=R.replace(/ $/,"%20"),W(f,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,f)}let v={get action(){return d},get location(){return s(n,c)},listen(x){if(i)throw new Error("A history only accepts one active listener");return n.addEventListener($e,m),i=x,()=>{n.removeEventListener($e,m),i=null}},createHref(x){return t(n,x)},createURL:S,encodeLocation(x){let f=S(x);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:h,replace:N,go(x){return c.go(x)}};return v}var Ue;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Ue||(Ue={}));function Ks(s,t,a){return a===void 0&&(a="/"),Qs(s,t,a)}function Qs(s,t,a,r){let n=typeof t=="string"?pe(t):t,l=mt(n.pathname||"/",a);if(l==null)return null;let c=dt(s);Ys(c);let d=null;for(let i=0;d==null&&i<c.length;++i){let o=ca(l);d=ia(c[i],o)}return d}function dt(s,t,a,r){t===void 0&&(t=[]),a===void 0&&(a=[]),r===void 0&&(r="");let n=(l,c,d)=>{let i={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};i.relativePath.startsWith("/")&&(W(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let o=ae([r,i.relativePath]),p=a.concat(i);l.children&&l.children.length>0&&(W(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+o+'".')),dt(l.children,t,p,o)),!(l.path==null&&!l.index)&&t.push({path:o,score:ra(o,l.index),routesMeta:p})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))n(l,c);else for(let i of ut(l.path))n(l,c,i)}),t}function ut(s){let t=s.split("/");if(t.length===0)return[];let[a,...r]=t,n=a.endsWith("?"),l=a.replace(/\?$/,"");if(r.length===0)return n?[l,""]:[l];let c=ut(r.join("/")),d=[];return d.push(...c.map(i=>i===""?l:[l,i].join("/"))),n&&d.push(...c),d.map(i=>s.startsWith("/")&&i===""?"/":i)}function Ys(s){s.sort((t,a)=>t.score!==a.score?a.score-t.score:na(t.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}const Zs=/^:[\w-]+$/,Xs=3,ea=2,ta=1,sa=10,aa=-2,We=s=>s==="*";function ra(s,t){let a=s.split("/"),r=a.length;return a.some(We)&&(r+=aa),t&&(r+=ea),a.filter(n=>!We(n)).reduce((n,l)=>n+(Zs.test(l)?Xs:l===""?ta:sa),r)}function na(s,t){return s.length===t.length&&s.slice(0,-1).every((r,n)=>r===t[n])?s[s.length-1]-t[t.length-1]:0}function ia(s,t,a){let{routesMeta:r}=s,n={},l="/",c=[];for(let d=0;d<r.length;++d){let i=r[d],o=d===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",m=la({path:i.relativePath,caseSensitive:i.caseSensitive,end:o},p),h=i.route;if(!m)return null;Object.assign(n,m.params),c.push({params:n,pathname:ae([l,m.pathname]),pathnameBase:da(ae([l,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(l=ae([l,m.pathnameBase]))}return c}function la(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[a,r]=oa(s.path,s.caseSensitive,s.end),n=t.match(a);if(!n)return null;let l=n[0],c=l.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:r.reduce((o,p,m)=>{let{paramName:h,isOptional:N}=p;if(h==="*"){let v=d[m]||"";c=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const S=d[m];return N&&!S?o[h]=void 0:o[h]=(S||"").replace(/%2F/g,"/"),o},{}),pathname:l,pathnameBase:c,pattern:s}}function oa(s,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),ot(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let r=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,i)=>(r.push({paramName:d,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),r]}function ca(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ot(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function mt(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,r=s.charAt(a);return r&&r!=="/"?null:s.slice(a)||"/"}const ae=s=>s.join("/").replace(/\/\/+/g,"/"),da=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/");function ua(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const ht=["post","put","patch","delete"];new Set(ht);const ma=["get",...ht];new Set(ma);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function me(){return me=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},me.apply(this,arguments)}const ha=u.createContext(null),pa=u.createContext(null),pt=u.createContext(null),xe=u.createContext(null),fe=u.createContext({outlet:null,matches:[],isDataRoute:!1}),xt=u.createContext(null);function Re(){return u.useContext(xe)!=null}function xa(){return Re()||W(!1),u.useContext(xe).location}function fa(s,t){return ga(s,t)}function ga(s,t,a,r){Re()||W(!1);let{navigator:n}=u.useContext(pt),{matches:l}=u.useContext(fe),c=l[l.length-1],d=c?c.params:{};c&&c.pathname;let i=c?c.pathnameBase:"/";c&&c.route;let o=xa(),p;if(t){var m;let x=typeof t=="string"?pe(t):t;i==="/"||(m=x.pathname)!=null&&m.startsWith(i)||W(!1),p=x}else p=o;let h=p.pathname||"/",N=h;if(i!=="/"){let x=i.replace(/^\//,"").split("/");N="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let S=Ks(s,{pathname:N}),v=Na(S&&S.map(x=>Object.assign({},x,{params:Object.assign({},d,x.params),pathname:ae([i,n.encodeLocation?n.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?i:ae([i,n.encodeLocation?n.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),l,a,r);return t&&v?u.createElement(xe.Provider,{value:{location:me({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Z.Pop}},v):v}function ba(){let s=Ia(),t=ua(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),a=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),a?u.createElement("pre",{style:n},a):null,null)}const va=u.createElement(ba,null);class ja extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?u.createElement(fe.Provider,{value:this.props.routeContext},u.createElement(xt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ya(s){let{routeContext:t,match:a,children:r}=s,n=u.useContext(ha);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),u.createElement(fe.Provider,{value:t},r)}function Na(s,t,a,r){var n;if(t===void 0&&(t=[]),a===void 0&&(a=null),r===void 0&&(r=null),s==null){var l;if(!a)return null;if(a.errors)s=a.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)s=a.matches;else return null}let c=s,d=(n=a)==null?void 0:n.errors;if(d!=null){let p=c.findIndex(m=>m.route.id&&(d==null?void 0:d[m.route.id])!==void 0);p>=0||W(!1),c=c.slice(0,Math.min(c.length,p+1))}let i=!1,o=-1;if(a&&r&&r.v7_partialHydration)for(let p=0;p<c.length;p++){let m=c[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(o=p),m.route.id){let{loaderData:h,errors:N}=a,S=m.route.loader&&h[m.route.id]===void 0&&(!N||N[m.route.id]===void 0);if(m.route.lazy||S){i=!0,o>=0?c=c.slice(0,o+1):c=[c[0]];break}}}return c.reduceRight((p,m,h)=>{let N,S=!1,v=null,x=null;a&&(N=d&&m.route.id?d[m.route.id]:void 0,v=m.route.errorElement||va,i&&(o<0&&h===0?(Ea("route-fallback"),S=!0,x=null):o===h&&(S=!0,x=m.route.hydrateFallbackElement||null)));let f=t.concat(c.slice(0,h+1)),R=()=>{let w;return N?w=v:S?w=x:m.route.Component?w=u.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=p,u.createElement(ya,{match:m,routeContext:{outlet:p,matches:f,isDataRoute:a!=null},children:w})};return a&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?u.createElement(ja,{location:a.location,revalidation:a.revalidation,component:v,error:N,children:R(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):R()},null)}var ft=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(ft||{});function Sa(s){let t=u.useContext(pa);return t||W(!1),t}function wa(s){let t=u.useContext(fe);return t||W(!1),t}function Ca(s){let t=wa(),a=t.matches[t.matches.length-1];return a.route.id||W(!1),a.route.id}function Ia(){var s;let t=u.useContext(xt),a=Sa(ft.UseRouteError),r=Ca();return t!==void 0?t:(s=a.errors)==null?void 0:s[r]}const _e={};function Ea(s,t,a){_e[s]||(_e[s]=!0)}function ka(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function Ie(s){W(!1)}function Da(s){let{basename:t="/",children:a=null,location:r,navigationType:n=Z.Pop,navigator:l,static:c=!1,future:d}=s;Re()&&W(!1);let i=t.replace(/^\/*/,"/"),o=u.useMemo(()=>({basename:i,navigator:l,static:c,future:me({v7_relativeSplatPath:!1},d)}),[i,d,l,c]);typeof r=="string"&&(r=pe(r));let{pathname:p="/",search:m="",hash:h="",state:N=null,key:S="default"}=r,v=u.useMemo(()=>{let x=mt(p,i);return x==null?null:{location:{pathname:x,search:m,hash:h,state:N,key:S},navigationType:n}},[i,p,m,h,N,S,n]);return v==null?null:u.createElement(pt.Provider,{value:o},u.createElement(xe.Provider,{children:a,value:v}))}function Pa(s){let{children:t,location:a}=s;return fa(Ee(t),a)}new Promise(()=>{});function Ee(s,t){t===void 0&&(t=[]);let a=[];return u.Children.forEach(s,(r,n)=>{if(!u.isValidElement(r))return;let l=[...t,n];if(r.type===u.Fragment){a.push.apply(a,Ee(r.props.children,l));return}r.type!==Ie&&W(!1),!r.props.index||!r.props.children||W(!1);let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Ee(r.props.children,l)),a.push(c)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ra="6";try{window.__reactRouterVersion=Ra}catch{}const Oa="startTransition",qe=Kt[Oa];function za(s){let{basename:t,children:a,future:r,window:n}=s,l=u.useRef();l.current==null&&(l.current=Vs({window:n,v5Compat:!0}));let c=l.current,[d,i]=u.useState({action:c.action,location:c.location}),{v7_startTransition:o}=r||{},p=u.useCallback(m=>{o&&qe?qe(()=>i(m)):i(m)},[i,o]);return u.useLayoutEffect(()=>c.listen(p),[c,p]),u.useEffect(()=>ka(r),[r]),u.createElement(Da,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:c,future:r})}var He;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(He||(He={}));var Ve;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Ve||(Ve={}));console.log("Organizador de Estudos - Starting application...");window.addEventListener("unhandledrejection",s=>{console.error("Unhandled promise rejection:",s.reason),s.preventDefault()});window.addEventListener("error",s=>{console.error("Uncaught error:",s.message,s.filename,s.lineno)});const Ma=we.createRoot(document.getElementById("root"));Ma.render(e.jsx(Qt.StrictMode,{children:e.jsx(za,{children:e.jsxs(Pa,{children:[e.jsx(Ie,{path:"/",element:e.jsx(Ts,{})}),e.jsx(Ie,{path:"/admin",element:e.jsx(Hs,{})})]})})}));
//# sourceMappingURL=index-C4giU259.js.map
